# 用户故事 - NoStop: AI 智能路线规划器 (AI 版)

## Epic 1: 对话式路线规划 (意图解析)
**优先级**: 关键 (Critical)

### Story 1.1: 自然语言路线请求
**作为一个** 对训练计划只有模糊想法的骑行者
**我想要** 用自然语言输入我的计划（例如“今晚找个安静的 30km 绕圈”）
**以便于** 我不需要手动调整复杂的过滤器和滑块。
**但是** 如果我的请求太模糊，AI 应该做出合理的假设（例如默认 30km）。

**验收标准 (Gherkin):**
```gherkin
功能: AI 意图解析

  场景: 用户输入复杂的自然语言请求
    假如 我在主屏幕
    当 我输入“今晚找一条安全的 40km 路线，不要爬坡”
    那么 系统应该调用 Minimax API
    并且 解析出的参数应为:
      | 距离          | 40km   |
      | 爬坡          | 平路   |
      | 安全权重      | 高     |
      | 时间段        | 夜间   |
    并且 路线生成引擎应使用这些参数
```

## Epic 2: 语义安全评分 ("常识"引擎)

### Story 2.1: 上下文感知风险评估
**作为一个** 注重安全的夜骑者
**我想要** 避开那些在夜间特别危险的路线（例如夜市、学校区域）
**以便于** 我不会陷入拥堵或面临标准地图忽略的隐形危险。
**但是** 我不希望在白天这些路段安全的时候屏蔽它们。

**验收标准 (Gherkin):**
```gherkin
功能: 语义安全评分

  场景: 评估周五晚上夜市附近的路线
    假如 一条候选路线经过“夜市”POI 50米范围内
    并且 当前模拟时间是“周五 20:00”
    当 AI 语义引擎评估该路线时
    那么 它应该给该路段标记“高风险”
    并且 整体“安全评分”应受到惩罚
    并且 该路线的排名应低于其他安静的道路
```

## Epic 3: AI 探路报告 (情感化交互)

### Story 3.1: 专业路线点评
**作为一个** 在路线之间做选择的用户
**我想要** 阅读一段简短、专业的路线特征摘要
**以便于** 我对骑行感到自信和期待。
**但是** 摘要必须准确并突出具体的危险点。

**验收标准 (Gherkin):**
```gherkin
功能: AI 探路报告

  场景: 为推荐路线生成摘要
    假如 生成了一条非机动车道覆盖率高的路线
    当 结果卡片显示时
    那么 我应该看到一段以鼓励性开场白（例如“非常适合恢复训练...”）开始的文本摘要
    并且 文本应提及具体数据点（例如“90% 非机动车道”）
    并且 语气应该像一位“骑行教练”
```

## Epic 4: 导出与集成

### Story 4.1: 标准 GPX 导出
**作为一个** 准备出发的用户
**我想要** 将最终 AI 选择的路线导出为 GPX 文件
**以便于** 我可以将其加载到我的 Garmin/Wahoo 码表中。

**验收标准 (Gherkin):**
```gherkin
功能: GPX 导出

  场景: 导出 AI 生成的路线
    假如 我选择了“AI 推荐 #1”路线
    当 我点击“下载 GPX”
    那么 应该下载一个有效的 GPX 文件
    并且 文件名应反映意图（例如 "NoStop_Quiet_Night_30km.gpx"）
```
